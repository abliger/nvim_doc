<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="description" content="vim out of the box">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Nvim 文档: usr_08</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet">
    <link href="../css/normalize.min.css" rel="stylesheet">
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <header class="container">
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a href="/" class="navbar-brand" aria-label="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" role="img" width="173" height="50" viewBox="0 0 742 214"
                        aria-label="Neovim">
                        <title>Neovim</title>
                        <defs>
                            <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="a">
                                <stop stop-color="#16B0ED" stop-opacity=".8" offset="0%" />
                                <stop stop-color="#0F59B2" stop-opacity=".837" offset="100%" />
                            </linearGradient>
                            <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="b">
                                <stop stop-color="#7DB643" offset="0%" />
                                <stop stop-color="#367533" offset="100%" />
                            </linearGradient>
                            <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="c">
                                <stop stop-color="#88C649" stop-opacity=".8" offset="0%" />
                                <stop stop-color="#439240" stop-opacity=".84" offset="100%" />
                            </linearGradient>
                        </defs>
                        <g fill="none" fill-rule="evenodd">
                            <path d="M.027 45.459L45.224-.173v212.171L.027 166.894V45.459z" fill="url(#a)"
                                transform="translate(1 1)" />
                            <path d="M129.337 45.89L175.152-.149l-.928 212.146-45.197-45.104.31-121.005z" fill="url(#b)"
                                transform="matrix(-1 0 0 1 305 1)" />
                            <path d="M45.194-.137L162.7 179.173l-32.882 32.881L12.25 33.141 45.194-.137z" fill="url(#c)"
                                transform="translate(1 1)" />
                            <path d="M46.234 84.032l-.063 7.063-36.28-53.563 3.36-3.422 32.983 49.922z"
                                fill-opacity=".13" fill="#000" />
                            <g fill="#444">
                                <path
                                    d="M227 154V64.44h4.655c1.55 0 2.445.75 2.685 2.25l.806 13.502c4.058-5.16 8.786-9.316 14.188-12.466 5.4-3.15 11.413-4.726 18.037-4.726 4.893 0 9.205.781 12.935 2.34 3.729 1.561 6.817 3.811 9.264 6.751 2.448 2.942 4.297 6.48 5.55 10.621 1.253 4.14 1.88 8.821 1.88 14.042V154h-8.504V96.754c0-8.402-1.91-14.987-5.729-19.757-3.82-4.771-9.667-7.156-17.544-7.156-5.851 0-11.28 1.516-16.292 4.545-5.013 3.032-9.489 7.187-13.427 12.467V154H227zM350.624 63c5.066 0 9.755.868 14.069 2.605 4.312 1.738 8.052 4.268 11.219 7.592s5.638 7.412 7.419 12.264C385.11 90.313 386 95.883 386 102.17c0 1.318-.195 2.216-.588 2.696-.393.48-1.01.719-1.851.719h-64.966v1.70c0 6.708.784 12.609 2.353 17.7 1.567 5.09 3.8 9.357 6.695 12.802 2.895 3.445 6.393 6.034 10.495 7.771 4.1 1.738 8.686 2.606 13.752 2.606 4.524 0 8.446-.494 11.762-1.483 3.317-.988 6.108-2.097 8.37-3.324 2.261-1.227 4.056-2.336 5.383-3.324 1.326-.988 2.292-1.482 2.895-1.482.784 0 1.388.3 1.81.898l2.352 2.875c-1.448 1.797-3.362 3.475-5.745 5.031-2.383 1.558-5.038 2.891-7.962 3.998-2.926 1.109-6.062 1.991-9.41 2.65a52.21 52.21 0 01-10.088.989c-6.152 0-11.762-1.064-16.828-3.19-5.067-2.125-9.415-5.225-13.043-9.298-3.63-4.074-6.435-9.06-8.415-14.96C310.99 121.655 310 114.9 310 107.294c0-6.408.92-12.323 2.76-17.744 1.84-5.421 4.493-10.093 7.961-14.016 3.467-3.922 7.72-6.991 12.758-9.209C338.513 64.11 344.229 63 350.624 63zm.573 6c-4.696 0-8.904.702-12.623 2.105-3.721 1.404-6.936 3.421-9.65 6.053-2.713 2.631-4.908 5.79-6.586 9.474S319.55 94.439 319 99h60c0-4.679-.672-8.874-2.013-12.588-1.343-3.712-3.232-6.856-5.67-9.43-2.44-2.571-5.367-4.545-8.782-5.92-3.413-1.374-7.192-2.062-11.338-2.062zM435.546 63c6.526 0 12.368 1.093 17.524 3.28 5.154 2.186 9.5 5.286 13.04 9.298 3.538 4.013 6.238 8.85 8.099 14.51 1.861 5.66 2.791 11.994 2.791 19.002 0 7.008-.932 13.327-2.791 18.957-1.861 5.631-4.561 10.452-8.099 14.465-3.54 4.012-7.886 7.097-13.04 9.254-5.156 2.156-10.998 3.234-17.524 3.234-6.529 0-12.369-1.078-17.525-3.234-5.155-2.157-9.517-5.242-13.085-9.254-3.57-4.013-6.285-8.836-8.145-14.465-1.861-5.63-2.791-11.95-2.791-18.957 0-7.008.93-13.342 2.791-19.002 1.861-5.66 4.576-10.496 8.145-14.51 3.568-4.012 7.93-7.112 13.085-9.299C423.177 64.094 429.017 63 435.546 63zm-.501 86c5.341 0 10.006-.918 13.997-2.757 3.99-1.838 7.32-4.474 9.992-7.909 2.67-3.435 4.664-7.576 5.986-12.428 1.317-4.85 1.98-10.288 1.98-16.316 0-5.965-.66-11.389-1.98-16.27-1.322-4.88-3.316-9.053-5.986-12.519-2.67-3.463-6-6.13-9.992-7.999-3.991-1.867-8.657-2.802-13.997-2.802s-10.008.935-13.997 2.802c-3.991 1.87-7.322 4.536-9.992 8-2.671 3.465-4.68 7.637-6.03 12.518-1.35 4.881-2.026 10.305-2.026 16.27 0 6.026.675 11.465 2.025 16.316 1.35 4.852 3.36 8.993 6.031 12.428 2.67 3.435 6 6.07 9.992 7.91 3.99 1.838 8.656 2.756 13.997 2.756z"
                                    fill="currentColor" />
                                <path
                                    d="M530.57 152h-20.05L474 60h18.35c1.61 0 2.967.39 4.072 1.166 1.103.778 1.865 1.763 2.283 2.959l17.722 49.138a92.762 92.762 0 012.551 8.429c.686 2.751 1.298 5.5 1.835 8.25.537-2.75 1.148-5.499 1.835-8.25a77.713 77.713 0 012.64-8.429l18.171-49.138c.417-1.196 1.164-2.181 2.238-2.96 1.074-.776 2.356-1.165 3.849-1.165H567l-36.43 92zM572 61h23v92h-23zM610 153V60.443h13.624c2.887 0 4.78 1.354 5.682 4.06l1.443 6.856a52.7 52.7 0 015.097-4.962 32.732 32.732 0 015.683-3.879 30.731 30.731 0 016.496-2.57c2.314-.632 4.855-.948 7.624-.948 5.832 0 10.63 1.579 14.39 4.736 3.758 3.157 6.57 7.352 8.434 12.585 1.444-3.068 3.248-5.698 5.413-7.894 2.165-2.194 4.541-3.984 7.127-5.367a32.848 32.848 0 018.254-3.068 39.597 39.597 0 018.796-.992c5.111 0 9.653.783 13.622 2.345 3.97 1.565 7.307 3.849 10.014 6.857 2.706 3.007 4.766 6.675 6.18 11.005C739.29 83.537 740 88.5 740 94.092V153h-22.284V94.092c0-5.894-1.294-10.329-3.878-13.306-2.587-2.977-6.376-4.465-11.368-4.465-2.286 0-4.404.391-6.358 1.172a15.189 15.189 0 00-5.144 3.383c-1.473 1.474-2.631 3.324-3.474 5.548-.842 2.225-1.263 4.781-1.263 7.668V153h-22.37V94.092c0-6.194-1.249-10.704-3.744-13.532-2.497-2.825-6.18-4.24-11.051-4.24-3.19 0-6.18.798-8.976 2.391-2.799 1.593-5.399 3.775-7.804 6.54V153H610zM572 30h23v19h-23z"
                                    fill="currentColor" fill-opacity=".8" />
                            </g>
                        </g>
                    </svg>
                </a>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1>Nvim 文档: usr_08</h1>
        <A NAME="top"></A>
        <A HREF="index.html">主帮助文件</A>

        <HR>
        <PRE>

*<A NAME="usr_08.txt"></A><B>usr_08.txt</B>*	Nvim

             VIM用户手册 - by Bram Moolenaar

                  分割<A HREF="windows\.html#windows">窗口</A>


查看两个不同的文件.或者同时查看统一文件的不同位置.并排放置两个文件去观察其不同.所有的一切都能通过分隔<A HREF="windows.html#window">窗口</A>实现.

|<A HREF="#08.1">08.1</A>|	分隔<A HREF="windows.html#window">窗口</A>
|<A HREF="#08.2">08.2</A>|	在其他文件上分隔<A HREF="windows.html#window">窗口</A>
|<A HREF="#08.3">08.3</A>|	窗口大小
|<A HREF="#08.4">08.4</A>|	竖直分隔
|<A HREF="#08.5">08.5</A>|	移动<A HREF="windows.html#windows">窗口</A>
|<A HREF="#08.6">08.6</A>|	对所有<A HREF="windows.html#windows">窗口</A>执行命令
|<A HREF="#08.7">08.7</A>|	使用比较模式查看不同
|<A HREF="#08.8">08.8</A>|	杂项
|<A HREF="#08.9">08.9</A>|	<A HREF="intro.html#Tab">标签</A>页

下一章: |<A HREF="usr_09.html">usr_09.txt</A>|  使用<A HREF="gui.html#GUI">GUI</A>
上一章: |<A HREF="usr_07.html">usr_07.txt</A>|  编辑更多文件
目录:   |<A HREF="usr_toc.html">usr_toc.txt</A>|

==============================================================================

*<A NAME="08.1"></A><B>08.1</B>*	分隔<A HREF="windows.html#window">窗口</A>

最简单打开一个新<A HREF="windows.html#window">窗口</A>的方式是使用下面的命令:

<B>	:split</B>

这个命令分开屏幕去显示两个<A HREF="windows.html#windows">窗口</A>且光标放置到上面的窗口:

    +----------------------------------+
    |/* file one.c */		   |
    |~				   |
    |~				   |
    |<A HREF="one.html">one.c=============================</A>|
    |/* file one.c */		   |
    |~				   |
    |<A HREF="one.html">one.c=============================</A>|
    &#124;				   |
    +----------------------------------+

你可以看到同文件的两个<A HREF="windows\.html#windows">窗口</A>. 带有 &quot;====&quot;的行是状态行.它显示了关于它上边<A HREF="windows.html#window">窗口</A>的信息.(实际上状态行会反色显示.)
   这连个<A HREF="windows\.html#windows">窗口</A>允许你查看同文件的不同部分.例如,你可以让上面的<A HREF="windows.html#window">窗口</A>展示程序的声明变量，下面的展示使用那些变量的代码.

<A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#w">w</A>命令能在<A HREF="windows\.html#windows">窗口</A>间跳转.如果你在上面的<A HREF="windows.html#window">窗口</A>, <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#w">w</A>会跳转到下面的<A HREF="windows.html#window">窗口</A>.如果你在下面的<A HREF="windows.html#window">窗口</A><A HREF="motion.html#it">它</A>会跳转到上面的<A HREF="windows.html#window">窗口</A>.(CTRL-W <A HREF="vimindex.html#CTRL-W">CTRL-W</A>使用两次也做一样的事,放置你离开CTRL-W晚了.)


关闭窗口

关闭<A HREF="windows.html#window">窗口</A>使用下面的命令:

<B>	:close</B>

实际上，任何退出编辑的命令皆可，如&quot;<A HREF="editing.html#:quit">:quit</A>&quot;和&quot;<A HREF="editing.html#ZZ">ZZ</A>&quot;.但是&quot;<A HREF="windows.html#:close">:close</A>&quot;会防止你在只剩下一个窗口时<A HREF="starting.html#exiting">退出</A>Vim.


关闭其他窗口

如果你打开了很多<A HREF="windows\.html#windows">窗口</A>,但是现在只关注其中的一个，下面的命令会很有用:

<B>	:only</B>

这会除当前<A HREF="windows\.html#windows">窗口</A>外关闭所有窗口.如果其他<A HREF="windows\.html#windows">窗口</A>没有保存,会得到错误然后那个<A HREF="windows.html#window">窗口</A>不会关闭.

==============================================================================

*<A NAME="08.2"></A><B>08.2</B>*	在其他文件上分隔<A HREF="windows.html#window">窗口</A>

下面的命令打开第二个<A HREF="windows.html#window">窗口</A>并编辑给定的文件:

<B>	:split two.c</B>

如果你在编辑one.c，结果看起来是这样:

    +----------------------------------+
    |/* file two.c */		   |
    |~				   |
    |~				   |
    |<A HREF="two.html">two.c=============================</A>|
    |/* file one.c */		   |
    |~				   |
    |<A HREF="one.html">one.c=============================</A>|
    &#124;				   |
    +----------------------------------+

使用<A HREF="windows.html#window">窗口</A>编辑空文件:

<B>	:new</B>

你可以重复使用&quot;<A HREF="windows.html#:split">:split</A>&quot;和&quot;<A HREF="windows.html#:new">:new</A>&quot;命令，创建任意数量的窗口.

==============================================================================

*<A NAME="08.3"></A><B>08.3</B>*	窗口大小

&quot;<A HREF="windows.html#:split">:split</A>&quot;命令有数量前缀.如果指定了，它会是新<A HREF="windows.html#window">窗口</A>的高度.例如,下面打开一个三行高度的可编辑<A HREF="windows.html#window">窗口</A>文件alpha.c:

<B>	:3split alpha.c</B>

对于已存在的<A HREF="windows\.html#windows">窗口</A>，你可以使用很多方式改变大小.如果你有鼠标, 可以这样做:移动鼠标到分割<A HREF="windows\.html#windows">窗口</A>的状态,点击<A HREF="motion.html#it">它</A>上下移动.（注意设置 set mouse=a）

增加<A HREF="windows.html#window">窗口</A>大小:

<B>	CTRL-W +</B>

减小<A HREF="motion.html#it">它</A>:

<B>	CTRL-W -</B>

这些命令都可以代数字前缀，使之能增加减小多行<A HREF="windows.html#window">窗口</A>大小.因此&quot;4 <A HREF="vimindex.html#CTRL-W">CTRL-W</A> +&quot;使<A HREF="windows.html#window">窗口</A>窗口变高4行.

设置<A HREF="windows.html#window">窗口</A>变为指定高度:

<B>	{height}CTRL-W _</B>

他是由: 一个数字 {height}, <A HREF="vimindex.html#CTRL-W">CTRL-W</A>和下划线组成 (使用减号加shift键入).
  要把一个窗口扩展到尽可能大，可以使用无计数前缀的 CTRL-W _ 命令.


使用鼠标

在 Vim 中，你可以用键盘很快完成很多工作。但很不幸，改变窗口大小要敲不少键。在这种情况下，使用鼠标会更快一些。把鼠标指针移到状态条上，按住左键并拖动。状态条会随之移动，这会使一个窗口更大一个更小.


选项

'winheight' 选项设置最小的期望窗口高度而 'winminheight' 选项设置最小的 "硬性"高度。
同样，'winwidth' 设置最小期望宽度而 'winminwidth' 设置最小硬性宽度。'equalalways' 选项使所有的窗口在关闭或者打开新窗口的时候总保持相同大小。

==============================================================================

*<A NAME="08.4"></A><B>08.4</B>*	竖直分隔

&quot;<A HREF="windows.html#:split">:split</A>&quot;命令能在当前窗口上创建新<A HREF="windows.html#window">窗口</A>.使<A HREF="windows.html#window">窗口</A>出现在左边,使用:

<B>	:vsplit</B>

或者:

<B>	:vsplit two.c</B>

结果如下:

    +--------------------------------------+
    |/* file two.c */   |/* file one.c */  ||||
    |~		    |~		       ||||
    |~		    |~		       ||||
    |~		    |~		       ||||
    |<A HREF="two.html">two.c===============one.c=============</A>|
    &#124;				       |
    +--------------------------------------+

事实上, 这个中间的竖线会反色显示. 这就是垂直分割线.他从左右分开两个<A HREF="windows\.html#windows">窗口</A>.

也可以使用&quot;<A HREF="windows.html#:vnew">:vnew</A>&quot;命令,在左边创建空白文件<A HREF="windows.html#window">窗口</A>. 还有一种方法是:

<B>	:vertical new</B>

可以放在任何分割窗口的命令的前面。这会在分割窗口的时候用垂直分割取代水平分割。(如果命令不分割窗口，这个前缀不起作用)


窗口间跳转

由于你可以用垂直分割和水平分割命令打开任意多的窗口，你就几乎能够任意设置窗口的布局。接着，你可以用下面的命令在窗口之间跳转:

    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#h">h</A>	跳转到<A HREF="windows.html#window">窗口</A>左边
    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#j">j</A>	跳转到<A HREF="windows.html#window">窗口</A>下边
    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#k">k</A>	跳转到<A HREF="windows.html#window">窗口</A>上边
    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#l">l</A>	跳转到<A HREF="windows.html#window">窗口</A>右边

    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> t	跳转到最上边的<A HREF="windows.html#window">窗口</A>
    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#b">b</A>	跳转到底部的<A HREF="windows.html#window">窗口</A>

你可能已经注意到这里使用移动光标一样的命令用于跳转窗口。如果你喜欢，改用方向键也行。
  还有其它命令可以跳转到别的窗口，参见: |<A HREF="quickref.html#Q_wi">Q_wi</A>|.

==============================================================================

*<A NAME="08.5"></A><B>08.5</B>*	移动<A HREF="windows.html#windows">窗口</A>

你已经分割了一些窗口，但现在的位置不正确。这时，你需要一个命令用于移动窗口.例如, 你有三个<A HREF="windows\.html#windows">窗口</A>长成这样:

    +----------------------------------+
    |/* file two.c */		   |
    |~				   |
    |~				   |
    |<A HREF="two.html">two.c=============================</A>|
    |/* file three.c */		   |
    |~				   |
    |~				   |
    |<A HREF="three.html">three.c===========================</A>|
    |/* file one.c */		   |
    |~				   |
    |<A HREF="one.html">one.c=============================</A>|
    &#124;				   |
    +----------------------------------+

能清楚的看到最后的文件应放到顶部.选中那个<A HREF="windows.html#window">窗口</A>(使用 <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#w">w</A>)使用下面的命令

<B>	CTRL-W K</B>

使用<A HREF="change.html#uppercase">大写</A><A HREF="print.html#letter">字母</A><A HREF="various.html#K">K</A>.这样窗口将被移到最上面。你可以注意到，这里又用 K 表示向上移动了.
   当你竖直分隔窗口, <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="various.html#K">K</A>会移动当前<A HREF="windows.html#window">窗口</A>到顶部然后使<A HREF="motion.html#it">它</A>占满Vim<A HREF="windows.html#window">窗口</A>的全部宽度.如果原来长这样:

    +-------------------------------------------+
    |/* two.c */  |/* three.c */  |/* one.c */  |
    |~	      |~	      |~	    |
    |~	      |~	      |~	    |
    |~	      |~	      |~	    |
    |~	      |~	      |~	    |
    |~	      |~	      |~	    |
    |<A HREF="two.html">two.c=========three.c=========one.c========</A>|
    &#124;					    |
    +-------------------------------------------+

在中间窗口（three.c）使用<A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="various.html#K">K</A>后的结果为:

    +-------------------------------------------+
    |/* three.c */				    |
    |~					    |
    |~					    |
    |<A HREF="three.html">three.c====================================</A>|
    |/* two.c */	       |/* one.c */	    ||||
    |~		       |~		    ||||
    |<A HREF="two.html">two.c==================one.c===============</A>|
    &#124;					    |
    +-------------------------------------------+

还有三个相似的命令 (估计你已经猜出来了):

    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#H">H</A>	移动<A HREF="windows.html#window">窗口</A>到左边
    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="change.html#J">J</A>	移动<A HREF="windows.html#window">窗口</A>到下面
    <A HREF="vimindex.html#CTRL-W">CTRL-W</A> <A HREF="motion.html#L">L</A>	移动<A HREF="windows.html#window">窗口</A>到右边

==============================================================================

*<A NAME="08.6"></A><B>08.6</B>*	对所有<A HREF="windows.html#windows">窗口</A>执行命令

当你有了一些打开的<A HREF="windows\.html#windows">窗口</A>然后你想要退出Vim,你可以分别关闭每一个<A HREF="windows.html#window">窗口</A>. 更快的方法是:

<B>	:qall</B>

它代表&quot;quit all&quot;.如果任意<A HREF="windows\.html#windows">窗口</A>的内容没有保存,Vim就不会退出.同时光标会自动跳到那个窗口，你可以用 ":write" 命令保存该文件或者 ":quit!" 放弃修改.

如果你知道有窗口被改了，而你想全部保存，则执行如下命令:

<B>	:wall</B>

它代表&quot;write all&quot;.但实际上, <A HREF="motion.html#it">它</A>只保存发生改变的文件.Vim 知道保存一个没有修改过的文件是没有意义的.
   由&quot;<A HREF="editing.html#:qall">:qall</A>&quot;和&quot;<A HREF="editing.html#:wall">:wall</A>&quot;组成的&quot;write and quit all&quot;命令:

<B>	:wqall</B>

它会保存所有修改的文件并退出Vim.
最后，这个命令退出Vim不保存修改:

<B>	:qall!</B>

注意，这个命令是不能撤销的!


为所有的参数打开窗口

要让 Vim 为每个文件打开一个窗口，可以使用 "-o" 参数:

<B>	vim -o one.txt two.txt three.txt</B>

结果为:

    +-------------------------------+
    |file one.txt			|
    |~				|
    |<A HREF="one.html">one.txt========================</A>|
    |file two.txt			|
    |~				|
    |<A HREF="two.html">two.txt========================</A>|
    |file three.txt			|
    |~				|
    |<A HREF="three.html">three.txt======================</A>|
    &#124;				|
    +-------------------------------+

&quot;<A HREF="starting.html#-O">-O</A>&quot;参数可以获得竖直<A HREF="windows\.html#windows">窗口</A>.
   当Vim已经打开,&quot;<A HREF="windows.html#:all">:all</A>&quot;命令会为文件列表的每一个文件打开<A HREF="windows.html#window">窗口</A>.&quot;<A HREF="windows.html#:vertical">:vertical</A> all&quot;以垂直分割的方法打开窗口.

==============================================================================

*<A NAME="08.7"></A><B>08.7</B>*	使用比较模式查看不同

想要比较两个文件的不同点，由一种特殊的方式启动Nvim.打开&quot;main.c&quot;插入一些字符. 打开<A HREF="options.html#'backup'">'backup'</A>选项保存文件,<A HREF="editing\.html#backup">备份</A>文件 &quot;main.c~&quot;会保留文件的上一个版本.使用下面命令以<A HREF="diff.html#diff">比较</A>模式打开Nvim:

<B>	nvim -d main.c~ main.c</B>

Vim 会用垂直分割的方式打开两个文件。你只能看到你修改过的地方和上下几行的地方.

     VV		      VV
    +-----------------------------------------+
    |+ +--123 lines: /* a|+ +--123 lines: /* a|  &lt;- fold|||
    &#124;  text		     &#124;	text		  |
    &#124;  text		     &#124;	text		  |
    &#124;  text		     &#124;	text		  |
    &#124;  text		     &#124;	changed text	  &#124;  &lt;- changed line
    &#124;  text		     &#124;	text		  |
    &#124;  text		     &#124;	------------------|  &lt;- deleted line
    &#124;  text		     &#124;	text		  |
    &#124;  text		     &#124;	text		  |
    &#124;  text		     &#124;	text		  |
    |+ +--432 lines: text|+ +--432 lines: text|  &lt;- fold|||
    &#124;  ~		     &#124;	~		  |
    &#124;  ~		     &#124;	~		  |
    |<A HREF="main.html">main.c~==============main.c==============</A>|
    &#124;					  |
    +-----------------------------------------+

(这幅图没有显示出高亮效果,实际更好)

那些没有修改的行会被折叠成一行，这称为 "关闭的折叠" (closed fold)。上图中由 "<- fold" 标记的行就是一个用一行表示 123 行的折叠。这些行在两个文件中完全相 同。 标记为 "<- 修改过的行" 被高亮显示，而增加的行被用另一种颜色表示。这可以很 清楚地表示出两个文件间的不同。 被删除的行在 main.c窗口中用 "---" 显示，如图中用 "<- 删除的行" 标记的行。 这些字符并不是真的存在。它们只是用于填充 main.c，以便与另一个窗口对齐.


折叠行

每一个<A HREF="windows.html#window">窗口</A>都和左边的窗口由微小的不同.图中标识为 "VV"。你会发现每个折叠在那个位置都有一个加号。把鼠标移到那里并按左键可以打开那个折起，从而让你看到里面的内容。对于打开的折叠，折叠栏上会出现一个减号。如果你单击那个减号，折叠会被重新关闭。当然，这只能在你有鼠标的情况下使用。如果你没有，可以用 "zo" 打开一个折叠。关闭使用 "zc".


用Vim做比较

启动比较模式的另一种方法从 Vim 内部开始: 编辑 "main.c" 文件，然后分割窗口显示区别:

<B>	:edit main.c</B>
<B>	:vertical diffsplit main.c~</B>

&quot;<A HREF="windows.html#:vertical">:vertical</A>&quot;命令使窗口用垂直的方式分割。如果你不写这个命令，结果会变成水平分割.

如果你有一个当前文件的补丁或者 diff 文件，你可以用第三种方法启动比较模式: 先编辑这个文件，然后告诉 Vim 补丁文件的名称:

<B>	:edit main.c</B>
<B>	:vertical diffpatch main.c.diff</B>

警告: 补丁文件中必须仅包括为一个目标文件所做的补丁，否则你可能会得到一大堆错误信息。还可能有些你没打算打补丁的文件也被打了补丁。补丁功能只改变内存中的文件备份，不会修改你硬盘上的文件 (除非你决定写入改动).


滚动绑定

当文件中有很多改动时，你可以用通常的方式滚动屏幕。Vim 会尽可能保持两个文件对齐，以便你可以并排看到文件的区别。
如果暂时想关闭这个特性，使用如下命令:

<B>	:set noscrollbind</B>


跳转到修改的地方

如果你通过某种方法取消了折叠功能，可能很难找到有改动的地方。使用如下命令可以跳转到下一个修改点:

<B>	]c</B>

反向跳转:

<B>	[c</B>

加上一个计数前缀可以跳得更远.


消除差异

你可以把文本从一个窗口移到另一个，并以此来消除差异，或者为其中一个文件中增加几行。Vim 有时可能无法及时更新高亮显示。要修正这种问题，使用如下命令:

<B>	:diffupdate</B>

要消除差异，你可以把一个高亮显示的块从一个窗口移动到另一个窗口。以上面的"main.c" 和 "main.c~" 为例，把光标移到左边的窗口，在另一个窗口中被删除的行的位置，执行如下命令:

<B>	dp</B>

这将把文字从左边拷到右边，从而消除两边的差异。"dp" 代表 "diff put"。
你也可以反过来做: 把光标移到右边的窗口，移到被 "改动" 了的行上，然后执行如下命令:

<B>	do</B>

这把文本从左边拷到右边，从而消除差异。由于两个文件已经没有区别了，Vim 会把所有文字全部折叠起来。"do" 代表 "diff obtain"。本来用 "dg" (diff get) 会更好。可是它已经有另外的意思了 ("dgg" 删除从
光标为止到首行的所有文本).

关于比较模式, 详见 |<A HREF="diff.html#diff-mode">diff-mode</A>|.

==============================================================================

*<A NAME="08.8"></A><B>08.8</B>*	杂项

The <A HREF="options.html#'laststatus'">'laststatus'</A>选项用于指定什么时候对最后一个窗口显示状态条:

    0	永远不
    1	只有用分割窗口的时候 (默认)
    2	总是
    3	在底部有一个全局状态线，而不是每个都有一个
        <A HREF="windows.html#window">窗口</A>

很多编辑另一个文件的命令都有一个使用分割窗口的变体。对于命令行命令，这通过前置一个 "s" 实现。例如 ":tag" 用来跳到一个标记，"stag" 就会分割出一个新窗口并跳到那个标记。
对于普通模式，前置一个 CTRL-W 可以完成这个功能。例如，CTRL-^ 跳到轮换文件，而 CTRL-W CTRL-^ 打开一个新窗口并编辑轮换文件Many commands that 编辑其他文件.

'splitbelow' 选项可以让新的窗口出现在当前窗口的下面。'splitright' 选项让垂直分割的窗口出现在当前窗口的右边。

打开一个新窗口时可以在命令前加上一个修饰符说明新窗口应该出现在什么地方:

    <A HREF="windows.html#:leftabove">:leftabove</A> {cmd}	当前<A HREF="windows.html#window">窗口</A>的左上方
    <A HREF="windows.html#:aboveleft">:aboveleft</A> {cmd}	同上
    <A HREF="windows.html#:rightbelow">:rightbelow</A> {cmd}	当前<A HREF="windows.html#window">窗口</A>的右下方
    <A HREF="windows.html#:belowright">:belowright</A> {cmd}	同上
    <A HREF="windows.html#:topleft">:topleft</A> {cmd}		Vim<A HREF="windows.html#window">窗口</A>的最上方或最左边
    <A HREF="windows.html#:botright">:botright</A> {cmd}		Vim<A HREF="windows.html#window">窗口</A>的最下方或最右方


==============================================================================

*<A NAME="08.9"></A><B>08.9</B>*	<A HREF="intro.html#Tab">标签</A>页

你会注意到<A HREF="windows\.html#windows">窗口</A>绝不会重叠.这意味着屏幕空间很快会用完。这个问题的解决方法叫做<A HREF="intro.html#Tab">标签</A>页.

假设你编辑&quot;thisfile&quot;.  使用此命令创建新的<A HREF="intro.html#tab">标签</A>页:

<B>	:tabedit thatfile</B>

这会在一个窗口中编辑文件 "thatfile"，这个窗口会占满整个 Vim 窗口。你会注意到在顶部有一个含有两个文件名的横条:

    +----------------------------------+
    &#124; thisfile &#124; /thatfile/ __________X|    (thatfile is <A HREF="syntax\.html#bold">粗体</A>)
    |/* thatfile */			   |
    |that				   |
    |that				   |
    |~				   |
    |~				   |
    |~				   |
    &#124;				   |
    +----------------------------------+

现在你有两个<A HREF="intro.html#Tab">标签</A>页. 第一个是文件 "thisfile" 的窗口，第二个是文件"thatfile" 的窗口。这就像是两张重叠的纸，它们所带的的标签露在外面，显示其文件名.

现在，使用鼠标单击顶端的 "thisfile"。结果是

    +----------------------------------+
    &#124; /thisfile/ &#124; thatfile __________X|    (thisfile is <A HREF="syntax\.html#bold">粗体</A>)
    |/* thisfile */			   |
    |this				   |
    |this				   |
    |~				   |
    |~				   |
    |~				   |
    &#124;				   |
    +----------------------------------+

你可以通过单击顶端的标签切换标签页。如果没有鼠标或者不想用它，可以使用 "gt" 命令。助记符: Goto Tab。

现在，让我们通过下面的命令建立另一个标签页:

<B>	:tab split</B>

这会建立一个新的标签页，包含一个窗口，编辑和刚才所在窗口中的缓冲区相同的缓冲区:

    +-------------------------------------+
    &#124; thisfile &#124; /thisfile/ &#124; thatfile __X|   (thisfile is <A HREF="syntax\.html#bold">粗体</A>)
    |/* thisfile */			      |
    |this				      |
    |this				      |
    |~				      |
    |~				      |
    |~				      |
    &#124;				      |
    +-------------------------------------+

在任何打开窗口的 Ex 命令前面，你都可以放上 ":tab"。这个窗口在新标签页中打开。另一个例子:

<B>	:tab help gt</B>

它将在新的标签页中显示关于 "gt" 的帮助

使用标签页可以完成更多的工作:

- 在末尾标签后面的空白处单击鼠标
选择下个标签页，同 "gt"。

- 在右上角的 "X" 处单击鼠标
关闭当前标签页，除非当前标签页中的改变没有保存。

- 在标签行上双击鼠标
建立新标签页。

- "tabonly" 命令
关闭除了当前标签页以外的所有标签页，除非其它标签页中的改变没有保存。

详见 |<A HREF="tabpage.html#tab-page">tab-page</A>|.

==============================================================================

下一章: |<A HREF="usr_09.html">usr_09.txt</A>|  使用<A HREF="gui.html#GUI">GUI</A>
<A HREF="#top">top</A> - <A HREF="index.html">主帮助文件</A>
</PRE>
    </div>
</body>

</html>